
				<!DOCTYPE html>
				<html>
					<head>
						<meta charset="UTF-8">
						<meta name="viewport" content="width=device-width, initial-scale=1" />
						<link rel="stylesheet" href="pluginAssets/katex/katex.css"><script type="application/javascript" src="pluginAssets/mermaid/mermaid.min.js"></script><script type="application/javascript" src="pluginAssets/mermaid/mermaid_render.js"></script><link rel="stylesheet" href="pluginAssets/highlight.js/atom-one-light.css">
						<title>19/05/2024 - 25/05/2024</title>
					</head>
					<body>
						<div class="exported-note"><div class="exported-note-title">19/05/2024 - 25/05/2024</div>

<style>
		/* https://necolas.github.io/normalize.css/ */
		html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}
		article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}
		pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}
		b,strong{font-weight:bolder}small{font-size:80%}img{border-style:none}

		body {
			font-size: 15px;
			color: #32373F;
			word-wrap: break-word;
			line-height: 1.6em;
			background-color: #ffffff;
			font-family: 'Avenir', 'Arial', sans-serif;
			padding-bottom: 0px;
			padding-top: 0px;
		}
		kbd {
			border: 1px solid rgb(220, 220, 220);
			box-shadow: inset 0 -1px 0 rgb(220, 220, 220);
			padding: 2px 4px;
			border-radius: 3px;
			background-color: rgb(243, 243, 243);
		}
		::-webkit-scrollbar {
			width: 7px;
			height: 7px;
		}
		::-webkit-scrollbar-corner {
			background: none;
		}
		::-webkit-scrollbar-track {
			border: none;
		}
		::-webkit-scrollbar-thumb {
			background: rgba(100, 100, 100, 0.3); 
			border-radius: 5px;
		}
		::-webkit-scrollbar-track:hover {
			background: rgba(0, 0, 0, 0.1); 
		}
		::-webkit-scrollbar-thumb:hover {
			background: rgba(100, 100, 100, 0.7); 
		}

		

		/* Remove top padding and margin from first child so that top of rendered text is aligned to top of text editor text */

		#rendered-md > h1:first-child,
		#rendered-md > h2:first-child,
		#rendered-md > h3:first-child,
		#rendered-md > h4:first-child,
		#rendered-md > ul:first-child,
		#rendered-md > ol:first-child,
		#rendered-md > table:first-child,
		#rendered-md > blockquote:first-child,
		#rendered-md > img:first-child,
		#rendered-md > p:first-child {
			margin-top: 0;
			padding-top: 0;
		}
		
		p, h1, h2, h3, h4, h5, h6, ul, table {
			margin-top: .6em;
			margin-bottom: 1.35em;

			/*
				Adds support for RTL text in the note body. It automatically detects the direction using the content.
				Issue: https://github.com/laurent22/joplin/issues/3991
			*/
			unicode-bidi: plaintext;
		}

		h1, h2, h3, h4, h5, h6, ul, table {
			margin-bottom: 0.65em;
		}

		h1, h2, h3, h4, h5, h6 {
			line-height: 1.5em;
		}
		h1 {
			font-size: 1.5em;
			font-weight: bold;
			border-bottom: 1px solid #dddddd;
			padding-bottom: .3em;
		}
		h2 {
			font-size: 1.3em;
			font-weight: bold;
			padding-bottom: .1em; */
		}
		h3 {
			font-size: 1.1em;
			font-weight: bold;
		}
		h4, h5, h6 {
			font-size: 1em;
			font-weight: bold;
		}

		.exported-note-title {
			font-size: 2em;
			font-weight: bold;
			margin-bottom: 0.8em;
			line-height: 1.5em;
			padding-bottom: .35em;
			border-bottom: 1px solid #dddddd;
		}

		a {
			color: #155BDA;
		}
		ul, ol {
			padding-left: 0;
			margin-left: 1.7em;
		}
		li {
			margin-bottom: .4em;
		}
		li p {
			margin-top: 0.2em;
			margin-bottom: 0;
		}

		.resource-icon {
			display: inline-block;
			position: relative;
			top: 0.3em;
			text-decoration: none;
			width: 1.2em;
			height: 1.4em;
			margin-right: 0.4em;
			background-color:  #155BDA;
		}
    /* These icons are obtained from the wonderful ForkAwesome project by copying the src svgs 
     * into the css classes below.
     * svgs are obtained from https://github.com/ForkAwesome/Fork-Awesome/tree/master/src/icons/svg
     * instead of the svg width, height property you must use a viewbox here, 0 0 1536 1792 is typically the actual size of the icon
     * each line begins with the pre-amble -webkit-mask: url("data:image/svg+xml;utf8,
     * and of course finishes with ");
     * to prevent artifacts it is also necessary to include -webkit-mask-repeat: no-repeat;
     * on the following line
     * */
		.fa-joplin {
			/* Awesome Font file */
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M373.834 128C168.227 128 0 296.223 0 501.834v788.336C0 1495.778 168.227 1664 373.834 1664h788.336c205.608 0 373.83-168.222 373.83-373.83V501.834C1536 296.224 1367.778 128 1162.17 128zm397.222 205.431h417.424a7.132 7.132 0 0 1 7.132 7.133v132.552c0 4.461-3.619 8.073-8.077 8.073h-57.23c-24.168 0-43.768 19.338-44.284 43.374v2.377h-.017v136.191h-.053l-.466 509.375c-5.02 77.667-39.222 149.056-96.324 201.046-60.28 54.834-141.948 85.017-229.962 85.017-12.45 0-25.208-.61-37.907-1.785-92.157-8.682-181.494-48.601-251.662-112.438-71.99-65.517-117.147-150.03-127.164-238-11.226-98.763 23.42-192.783 95.045-257.937 81.99-74.637 198.185-101.768 316.613-75.704 5.574 1.227 9.55 6.282 9.55 11.997v199.52c-.199 2.625-1.481 6.599-8.183 2.896-.663-.365-1.194-.511-1.653-.531-21.987-10.587-45.159-17.57-68.559-19.916-.38-.04-.757-.124-1.138-.163-.537-.048-1.034-.033-1.556-.075-4.13-.354-8.183-.517-12.203-.58-.87-.011-1.771-.127-2.641-.127-.486 0-.951.05-1.437.057-1.464.011-2.886.115-4.33.163-2.76.102-5.497.211-8.182.448-.273.024-.547.07-.835.097-25.509 2.4-47.864 11.104-65.012 25.47-.954.802-1.974 1.53-2.9 2.36a1.34 1.34 0 0 1-.168.146c-23.96 21.8-34.881 53.872-30.726 90.316 4.62 40.737 26.94 81.156 62.841 113.823 35.908 32.67 80.335 52.977 125.113 57.186 35.118 3.36 66.547-3.919 89.899-20.461a97.255 97.255 0 0 0 9.365-7.501c2.925-2.661 5.569-5.5 8.086-8.416.3-.348.672-.673.975-1.024 8.253-9.864 14.222-21.067 17.996-33.148.639-2.034 1.051-4.148 1.564-6.227.381-1.563.81-3.106 1.112-4.693.555-2.784.923-5.632 1.253-8.49.086-.709.183-1.414.237-2.128.492-4.893.693-9.858.55-14.91h.013V521.623c-2.01-22.626-20.78-40.434-43.928-40.434h-57.23a8.071 8.071 0 0 1-8.077-8.073V340.564a7.132 7.132 0 0 1 7.136-7.133z'/></svg>");
		}
		.fa-file-image {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zm-128-448v320H256v-192l192-192 128 128 384-384zm-832-192c-106 0-192-86-192-192s86-192 192-192 192 86 192 192-86 192-192 192z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-pdf {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zm-514-593c25 20 53 38 84 56 42-5 81-7 117-7 67 0 152 8 177 49 7 10 13 28 2 52-1 1-2 3-3 4v1c-3 18-18 38-71 38-64 0-161-29-245-73-139 15-285 46-392 83-103 176-182 262-242 262-10 0-19-2-28-7l-24-12c-3-1-4-3-6-5-5-5-9-16-6-36 10-46 64-123 188-188 8-5 18-2 23 6 1 1 2 3 2 4 31-51 67-116 107-197 45-90 80-178 104-262-32-109-42-221-24-287 7-25 22-40 42-40h22c15 0 27 5 35 15 12 14 15 36 9 68-1 3-2 6-4 8 1 3 1 5 1 8v30c-1 63-2 123-14 192 35 105 87 190 146 238zm-576 411c30-14 73-57 137-158-75 58-122 124-137 158zm398-920c-10 28-10 76-2 132 3-16 5-31 7-44 2-17 5-31 7-43 1-3 2-5 4-8-1-1-1-3-2-5-1-18-7-29-13-36 0 2-1 3-1 4zm-124 661c88-35 186-63 284-81-10-8-20-15-29-23-49-43-93-103-127-176-19 61-47 126-83 197-15 28-30 56-45 83zm646-16c-5-5-31-24-140-24 49 18 94 28 124 28 9 0 14 0 18-1 0-1-1-2-2-3z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-word {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zM233 768v107h70l164 661h159l128-485c5-15 8-30 10-46 1-8 2-16 2-24h4l3 24c3 14 4 30 9 46l128 485h159l164-661h70V768h-300v107h90l-99 438c-4 16-6 33-7 46l-2 21h-4c0-6-2-14-3-21-3-13-5-30-9-46L825 768H711l-144 545c-4 16-5 33-8 46l-4 21h-4l-2-21c-1-13-3-30-7-46l-99-438h90V768H233z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-powerpoint {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zm-992-234v106h327v-106h-93v-167h137c43 0 82-2 118-15 90-31 146-124 146-233s-54-193-137-228c-38-15-84-19-130-19H416v107h92v555h-92zm353-280H650V882h120c35 0 62 6 83 18 36 21 56 62 56 115 0 56-20 99-62 120-21 10-47 15-78 15z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-excel {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zm-979-234v106h281v-106h-75l103-161c12-19 18-34 21-34h2c1 4 3 7 5 10 4 8 10 14 17 24l107 161h-76v106h291v-106h-68l-192-273 195-282h67V768H828v107h74l-103 159c-12 19-21 34-21 33h-2c-1-4-3-7-5-10-4-7-9-14-17-23L648 875h76V768H434v107h68l189 272-194 283h-68z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-audio {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zM620 850c12 5 20 17 20 30v544c0 13-8 25-20 30-4 1-8 2-12 2-8 0-16-3-23-9l-166-167H288c-18 0-32-14-32-32v-192c0-18 14-32 32-32h131l166-167c10-9 23-12 35-7zm417 689c19 0 37-8 50-24 83-102 129-231 129-363s-46-261-129-363c-22-28-63-32-90-10-28 23-32 63-9 91 65 80 100 178 100 282s-35 202-100 282c-23 28-19 68 9 90 12 10 26 15 40 15zm-211-148c17 0 34-7 47-20 56-60 87-137 87-219s-31-159-87-219c-24-26-65-27-91-3-25 24-27 65-2 91 33 36 52 82 52 131s-19 95-52 131c-25 26-23 67 2 91 13 11 29 17 44 17z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-video {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zM768 768c70 0 128 58 128 128v384c0 70-58 128-128 128H384c-70 0-128-58-128-128V896c0-70 58-128 128-128h384zm492 2c12 5 20 17 20 30v576c0 13-8 25-20 30-4 1-8 2-12 2-8 0-17-3-23-9l-265-266v-90l265-266c6-6 15-9 23-9 4 0 8 1 12 2z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-archive {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M640 384V256H512v128h128zm128 128V384H640v128h128zM640 640V512H512v128h128zm128 128V640H640v128h128zm700-388c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H768v128H640V128H128v1536h1280zM781 943c85 287 107 349 107 349 5 17 8 34 8 52 0 111-108 192-256 192s-256-81-256-192c0-18 3-35 8-52 0 0 21-62 120-396V768h128v128h79c29 0 54 19 62 47zm-141 465c71 0 128-29 128-64s-57-64-128-64-128 29-128 64 57 64 128 64z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-code {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zM480 768c11-14 31-17 45-6l51 38c14 11 17 31 6 45l-182 243 182 243c11 14 8 34-6 45l-51 38c-14 11-34 8-45-6l-226-301c-8-11-8-27 0-38zm802 301c8 11 8 27 0 38l-226 301c-11 14-31 17-45 6l-51-38c-14-11-17-31-6-45l182-243-182-243c-11-14-8-34 6-45l51-38c14-11 34-8 45 6zm-620 461c-18-3-29-20-26-37l138-831c3-18 20-29 37-26l63 10c18 3 29 20 26 37l-138 831c-3 18-20 29-37 26z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file-alt, .fa-file-csv {
      /* fork-awesome doesn't have csv so we use the text icon */
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280zM384 800c0-18 14-32 32-32h704c18 0 32 14 32 32v64c0 18-14 32-32 32H416c-18 0-32-14-32-32v-64zm736 224c18 0 32 14 32 32v64c0 18-14 32-32 32H416c-18 0-32-14-32-32v-64c0-18 14-32 32-32h704zm0 256c18 0 32 14 32 32v64c0 18-14 32-32 32H416c-18 0-32-14-32-32v-64c0-18 14-32 32-32h704z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		.fa-file {
			-webkit-mask: url("data:image/svg+xml;utf8,<svg viewBox='0 0 1536 1792' xmlns='http://www.w3.org/2000/svg'><path d='M1468 380c37 37 68 111 68 164v1152c0 53-43 96-96 96H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h896c53 0 127 31 164 68zm-444-244v376h376c-6-17-15-34-22-41l-313-313c-7-7-24-16-41-22zm384 1528V640H992c-53 0-96-43-96-96V128H128v1536h1280z'/></svg>");
      -webkit-mask-repeat: no-repeat;
		}
		blockquote {
			border-left: 4px solid rgb(220, 220, 220);
			padding-left: 1.2em;
			margin-left: 0;
			opacity: 0.7;
		}

		.jop-tinymce table,
		table {
			text-align: left;
			border-collapse: collapse;
			border: 1px solid rgb(220, 220, 220);
			background-color: #ffffff;
		}

		.jop-tinymce table td, .jop-tinymce table th,
		table td, th {
			text-align: left;
			padding: .5em 1em .5em 1em;
			font-size: 15;
			color: #32373F;
			font-family: 'Avenir', 'Arial', sans-serif;
		}

		.jop-tinymce table td,
		table td {
			border: 1px solid rgb(220, 220, 220);
		}

		.jop-tinymce table th,
		table th {
			border: 1px solid rgb(220, 220, 220);
			border-bottom: 2px solid rgb(220, 220, 220);
			background-color: rgb(247, 247, 247);
		}

		.jop-tinymce table tr:nth-child(even),
		table tr:nth-child(even) {
			background-color: rgb(247, 247, 247);
		}

		.jop-tinymce table tr:hover,
		table tr:hover {
			background-color: #e5e5e5;
		}

		hr {
			border: none;
			border-bottom: 2px solid #dddddd;
		}
		img {
			max-width: 100%;
			height: auto;
		}
		
		.inline-code,
		.mce-content-body code {
			border: 1px solid rgb(220, 220, 220);
			background-color: rgb(243, 243, 243);
			padding-right: .2em;
			padding-left: .2em;
			border-radius: .25em;
			color: rgb(0,0,0);
			font-size: .9em;
		}

		.highlighted-keyword {
			background-color: #F3B717;
			color: black;
		}

		.not-loaded-resource img {
			width: 1.15em;
			height: 1.15em;
			background: white;
			padding: 2px !important;
			border-radius: 2px;
			box-shadow: 0 1px 3px #000000aa;
		}

		a.not-loaded-resource img {
			margin-right: .2em;
		}

		a.not-loaded-resource {
			display: flex;
			flex-direction: row;
			align-items: center;
		}

		.md-checkbox input[type=checkbox]:checked {
			opacity: 0.7;
		}

		.jop-tinymce ul.joplin-checklist .checked,
		.md-checkbox .checkbox-label-checked {
			opacity: 0.5;
		}

		.exported-note {
			padding: 1em;
		}

		.joplin-editable .joplin-source {
			display: none;
		}

		mark {
			background: #F7D26E;
			color: black;
		}

		/* =============================================== */
		/* For TinyMCE */
		/* =============================================== */

		.mce-content-body {
			/* Note: we give a bit more padding at the bottom, to allow scrolling past the end of the document */
			padding: 5px 10px 10em 0;
		}

		/*
		.mce-content-body code {
			background-color: transparent;
		}
		*/

		.mce-content-body [data-mce-selected=inline-boundary] {
			background-color: transparent;
		}

		.mce-content-body .joplin-editable {
			cursor: pointer !important;
		}

		.mce-content-body.mce-content-readonly {
			opacity: 0.5;
		}

		/* We need that to make sure click events have the A has a target */
		.katex a span {
			pointer-events: none;
		}

		.media-player {
			width: 100%;
			margin-top: 10px;
		}

		.media-player.media-pdf {
			min-height: 35rem;
			width: 100%;
			max-width: 1000px;
			margin: 0;
			border: 0;
			display: block;
		}

		/* Clear the CODE style if the element is within a joplin-editable block */
		.mce-content-body .joplin-editable code {
			border: none;
			background: none;
			padding: 0;
			color: inherit;
			font-size: inherit;
		}

		/* To make code blocks horizontally scrollable */
		/* https://github.com/laurent22/joplin/issues/5740 */
		pre.hljs {
			overflow-x: auto;
		}

		/* =============================================== */
		/* For TinyMCE */
		/* =============================================== */

		@media print {
			body {
				height: auto !important;
			}

			pre {
				white-space: pre-wrap;
			}

			.code, .inline-code {
				border: 1px solid #CBCBCB;
			}

			#joplin-container-content {
				/* The height of the content is set dynamically by JavaScript (in updateBodyHeight) to go
				   around various issues related to scrolling. However when printing we don't want this
				   fixed size as that would crop the content. So we set it to auto here. "important" is
				   needed to override the style set by JavaScript at the element-level. */
				height: auto !important;
			}
		}
	

				/*
					FOR THE MARKDOWN EDITOR
				*/

				/* Remove the indentation from the checkboxes at the root of the document
				   (otherwise they are too far right), but keep it for their children to allow
				   nested lists. Make sure this value matches the UL margin. */

				li.md-checkbox {
					list-style-type: none;
				}

				li.md-checkbox input[type=checkbox] {
					margin-left: -1.71em;
					margin-right: 0.7em;
				}
				
				ul.joplin-checklist {
					list-style:none;
				}

				/*
					FOR THE RICH TEXT EDITOR
				*/

				ul.joplin-checklist li::before {
					content:"\f14a";
					font-family:"Font Awesome 5 Free";
					background-size: 16px 16px;
					pointer-events: all;
					cursor: pointer;
					width: 1em;
					height: 1em;
					margin-left: -1.3em;
					position: absolute;
					color: #32373F;
				}

				.joplin-checklist li:not(.checked)::before {
					content:"\f0c8";
				}
.mermaid { width: 640px; }
.mermaid-export-graph {
					opacity: 0;
					height: 0;
					z-index: 1;
					position: relative;
				} 
				.joplin-editable:hover .mermaid-export-graph,
				.joplin-editable .mermaid-export-graph:has(:focus-visible) {
					opacity: 1;
				}
				.mermaid-export-graph > button:hover {
					background-color: #CBDAF1 !important;
				}</style><div id="rendered-md"><h2 id="20052024-0942">20/05/2024 09:42</h2>
<p>I was able to &quot;revive&quot; the event builder by basically just using the correct flags:</p>
<ol>
<li>I was able to simply make it in our normal environment<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">cd $GM2DAQ_DIR/eventbuilder
make clean
make</pre><pre class="hljs"><code><span class="hljs-built_in">cd</span> <span class="hljs-variable">$GM2DAQ_DIR</span>/eventbuilder
make clean
make</code></pre></div>
</li>
<li>After a while of playing around, I figured out I had to run it with these parameters:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">./mevb -e DAQ -b BUF</pre><pre class="hljs"><code>./mevb -e DAQ -<span class="hljs-keyword">b</span> BUF</code></pre></div>
the <code class="inline-code">-b BUF</code> is important. Basically it looks for frontends that write to anything that begin with <code class="inline-code">BUF</code>, so our AMC13001, AMC13002, and MasterGM2 write to BUF001, BUF002, and BUF respectively so they all get compounded into the event builder.</li>
<li>I set the ODB programs settings to run this command:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">screen -dmS event_builder $GM2DAQ_DIR/eventbuilder/mevb -e DAQ -b BUF</pre><pre class="hljs"><code>screen -dmS event_builder <span class="hljs-variable">$GM2DAQ_DIR</span><span class="hljs-regexp">/eventbuilder/m</span>evb -e DAQ -b BUF</code></pre></div>
</li>
<li>After starting a run, you can then check the output on the <code class="inline-code">SYSTEM</code> buffer (the buffer name can be changed in ebuser.cpp if you'd like):<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">$MIDASSYS/bin/mdump -z SYSTEM</pre><pre class="hljs"><code><span class="hljs-variable">$MIDASSYS</span><span class="hljs-regexp">/bin/m</span>dump -z SYSTEM</code></pre></div>
</li>
</ol>
<p>Now all the data will be logged if the logger is set to log the system buffer.<br>
<strong>Note:</strong><br>
At one point I tried changing the ODB setting <code class="inline-code">/Equipment/EB/Settings/User build</code> to yes. This broke things, keep it at no.</p>
<hr>
<h2 id="20052024-0949">20/05/2024 09:49</h2>
<p>I noticed you will get CCC run abort errors if you try to start the 1 crate system with FC7 SFP ports enabled to talk to more than the one crate you have connected.</p>
<hr>
<h2 id="20052024-1019">20/05/2024 10:19</h2>
<p>According to this link: <a data-from-md title='https://daq00.triumf.ca/MidasWiki/index.php/MIDAS_Event_Construction' href='https://daq00.triumf.ca/MidasWiki/index.php/MIDAS_Event_Construction'>https://daq00.triumf.ca/MidasWiki/index.php/MIDAS_Event_Construction</a></p>
<p>Midas bank names can only be 4 characters.We were trying to make them 5, I'm not sure if this is problematic for Lawrence's software.</p>
<hr>
<h2 id="20052024-1029">20/05/2024 10:29</h2>
<p>To move files using an SSH tunnel:<br>
In one terminal:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">ssh -L 2222:10.0.0.3:22 pioneer@10.47.95.44</pre><pre class="hljs"><code><span class="hljs-attribute">ssh</span> -L <span class="hljs-number">2222</span>:<span class="hljs-number">10.0.0.3:22</span> pioneer@<span class="hljs-number">10.47.95.44</span></code></pre></div>
<p>Then:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">scp -P 2222 root@localhost:{file to copy} {destination}</pre><pre class="hljs"><code>scp -P <span class="hljs-number">2222</span> root@localhost:{<span class="hljs-built_in">file</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">copy</span>} {destination}</code></pre></div>
<p>similarly you can reverse the last command to move files.</p>
<hr>
<h2 id="20052024-1235">20/05/2024 12:35</h2>
<p>I was able to get interrupt triggering to &quot;work&quot; by adding some things.</p>
<p><strong>To CaloReadoutAMC13/frontend.cpp</strong></p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">//function pointer to the interrupt routine
#define USE_INTERRUPT

#ifdef USE_INTERRUPT
void (*interrupt_routine)(void);
#endif</pre><pre class="hljs"><code><span class="hljs-comment">//function pointer to the interrupt routine</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_INTERRUPT</span>

<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> USE_INTERRUPT</span>
<span class="hljs-type">void</span> (*interrupt_routine)(<span class="hljs-type">void</span>);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span></code></pre></div>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">  EQUIPMENT equipment[] = { 
    {
      &quot;AMC13%03d&quot;,              /* equipment name */
      {1, 0xffff,               /* event ID, trigger mask */
       &quot;BUF%03d&quot;,               /* event buffer */
       #ifdef USE_INTERRUPT
        EQ_INTERRUPT | EQ_EB,            /* equipment type */
       #else
        EQ_POLLED | EQ_EB,               /* equipment type */
       #endif
       LAM_SOURCE(0, 0xFFFFFF), /* event source crate 0, all stations */
       &quot;MIDAS&quot;,                 /* format */
       TRUE,                    /* enabled */
       RO_RUNNING ,              /* read only when running and end of run */
       10,                      /* poll for 1ms */
       0,                       /* stop run after this event limit */
       0,                       /* number of sub events */
       0,                       /* don't log history */
       &quot;&quot;, &quot;&quot;, &quot;&quot;,              /* frontend host, frontend name, frontend file name */
       &quot;&quot;, &quot;&quot;, FALSE},          /* status, status color, hidden */
      read_trigger_event,       /* readout routine */
    },
    {&quot;&quot;}
  };</pre><pre class="hljs"><code>  EQUIPMENT equipment[] = { 
    {
      &quot;AMC13%03d&quot;,              /* equipment name */
      {1, 0xffff,               /* event ID, trigger mask */
       &quot;BUF%03d&quot;,               /* event buffer */
       #ifdef USE_INTERRUPT
        EQ_INTERRUPT | EQ_EB,            /* equipment type */
       #else
        EQ_POLLED | EQ_EB,               /* equipment type */
       #endif
       LAM_SOURCE(0, 0xFFFFFF), /* event source crate 0, all stations */
       &quot;MIDAS&quot;,                 /* format */
       TRUE,                    /* enabled */
       RO_RUNNING ,              /* read only when running and end of run */
       10,                      /* poll for 1ms */
       0,                       /* stop run after this event limit */
       0,                       /* number of sub events */
       0,                       /* don't log history */
       &quot;&quot;, &quot;&quot;, &quot;&quot;,              /* frontend host, frontend name, frontend file name */
       &quot;&quot;, &quot;&quot;, FALSE},          /* status, status color, hidden */
      read_trigger_event,       /* readout routine */
    },
    {&quot;&quot;}
  };</code></pre></div>
<p>Above is justt a &quot;switch&quot; to turn on and off interrupt</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">INT interrupt_configure(INT cmd, INT source __attribute__((unused)), POINTER_T adr __attribute__((unused)))
{
  switch (cmd) {
    case CMD_INTERRUPT_ENABLE:
      break;
    case CMD_INTERRUPT_DISABLE:
      break;
    case CMD_INTERRUPT_ATTACH:
      interrupt_routine = (void (*)())adr;
      break;
    case CMD_INTERRUPT_DETACH:
      break;
  }</pre><pre class="hljs"><code><span class="hljs-variable constant_">INT</span> <span class="hljs-title function_">interrupt_configure</span>(<span class="hljs-params">INT cmd, INT source __attribute__((unused)), POINTER_T adr __attribute__((unused))</span>)
{
  <span class="hljs-keyword">switch</span> (cmd) {
    <span class="hljs-keyword">case</span> <span class="hljs-attr">CMD_INTERRUPT_ENABLE</span>:
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-attr">CMD_INTERRUPT_DISABLE</span>:
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-attr">CMD_INTERRUPT_ATTACH</span>:
      interrupt_routine = (<span class="hljs-keyword">void</span> (*)())adr;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-attr">CMD_INTERRUPT_DETACH</span>:
      <span class="hljs-keyword">break</span>;
  }</code></pre></div>
<p>I think this is some midas function that somehow links interrupt_routine to read_trigger_event? I'm not sure, I more or less copied it from the master frontend.cpp.</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">BOOL send_interrupt_signal()
{
  //std::cout &lt;&lt; &quot;Received interrupt signal&quot; &lt;&lt; std::endl;
  #ifdef USE_INTERRUPT
    (*interrupt_routine)();
  #endif
  return TRUE;
}</pre><pre class="hljs"><code><span class="hljs-type">BOOL</span> send_interrupt_signal()
{
  <span class="hljs-comment">//std::cout &lt;&lt; &quot;Received interrupt signal&quot; &lt;&lt; std::endl;</span>
  <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> USE_INTERRUPT</span>
    (*interrupt_routine)();
  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">TRUE</span>;
}</code></pre></div>
<p>The actual &quot;signal&quot; used by gpu_thread.cpp</p>
<p><strong>frontend.h</strong></p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">extern void (*interrupt_routine)(void); // Declare the interrupt routine as extern

// Function prototypes
BOOL send_interrupt_signal();</pre><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">extern</span> <span class="hljs-title">void</span> (<span class="hljs-params">*interrupt_routine</span>)(<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span>; <span class="hljs-comment">// Declare the interrupt routine as extern</span>

<span class="hljs-comment">// Function prototypes</span>
<span class="hljs-function">BOOL <span class="hljs-title">send_interrupt_signal</span>()</span>;</code></pre></div>
<p>Needed to give gpu_thread.cpp a way to send the interupt signal so it just includes this header file.</p>
<p><strong>gpu_thread.cpp</strong></p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">    send_interrupt_signal();
  } // while (1)</pre><pre class="hljs"><code>    <span class="hljs-built_in">send_interrupt_signal</span>();
  } <span class="hljs-comment">// while (1)</span></code></pre></div>
<p>If the gpu_thread gets to the end of it's while loop it sends an interrupt signal.</p>
<p>This seems to work for low rates (tested 20 Hz and 200 Hz). But the TCP buffer fills up immediately once I try 1000Hz. Somehow it's worse than polling.</p>
<p>Here's some additional reading on using interrupts:<br>
<a data-from-md title='https://daq00.triumf.ca/MidasWiki/index.php/Frontend_user_code' href='https://daq00.triumf.ca/MidasWiki/index.php/Frontend_user_code'>https://daq00.triumf.ca/MidasWiki/index.php/Frontend_user_code</a></p>
<hr>
<h2 id="23052024-0227">23/05/2024 02:27</h2>
<p>For the parallel port PCIe card.</p>
<p>I downlaoded the drivers here:<br>
<a data-from-md title='https://www.startech.com/en-us/cards-adapters/pex1s1p950' href='https://www.startech.com/en-us/cards-adapters/pex1s1p950'>https://www.startech.com/en-us/cards-adapters/pex1s1p950</a></p>
<p>In there was a pdf &quot;PEX1P2  DIG.pdf&quot; that was useful.<br>
<a data-from-md title='../_resources/80c3b9a05dec4f2a8f4ca5b73a8d6f90.pdf' href='../_resources/80c3b9a05dec4f2a8f4ca5b73a8d6f90.pdf'>PEX1P2  DIG.pdf</a></p>
<p>I followed those instructions and noticed I didn't see the card in <code class="inline-code">lscpi -v</code> as described. I swapped the PCIe ports of the meineberg and the parallel port PCIe cards and found that the port was the issue; afterwards I didn't see the meinberg but I saw the parrallel port. I'm not sure why this is. I've taken the meinberg card out to avoid further confusion.</p>
<hr>
<h2 id="23052024-0239">23/05/2024 02:39</h2>
<p>The pdf says to look at this information in <code class="inline-code">lspci -v</code>:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">02:00.2 Parallel controller: Asix Electronics Corporation Device 9100 (prog-if 03 [IEEE1284])
        Subsystem: Device a000:2000
        Flags: fast devsel, IRQ 5
        I/O ports at e010 [disabled] [size=8]
        I/O ports at e000 [disabled] [size=8]
        Memory at fbb01000 (32-bit, non-prefetchable) [disabled] [size=4K]
        Memory at fbb00000 (32-bit, non-prefetchable) [disabled] [size=4K]
        Capabilities: [50] MSI: Enable- Count=1/8 Maskable- 64bit+
        Capabilities: [78] Power Management version 3
        Capabilities: [80] Express Legacy Endpoint, MSI 00
        Capabilities: [100] Advanced Error Reporting</pre><pre class="hljs"><code>02:00.2 Parallel controller: Asix Electronics Corporation Device 9100 (prog-if 03 <span class="hljs-comment">[IEEE1284]</span>)
        Subsystem: Device a000:2000
        Flags: fast devsel, IRQ 5
        I/O ports at e010 <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=8]</span>
        I/O ports at e000 <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=8]</span>
        Memory at fbb01000 (32-bit, non-prefetchable) <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=4K]</span>
        Memory at fbb00000 (32-bit, non-prefetchable) <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=4K]</span>
        Capabilities: <span class="hljs-comment">[50]</span> MSI: Enable- Count=1/8 Maskable- 64bit+
        Capabilities: <span class="hljs-comment">[78]</span> Power Management version 3
        Capabilities: <span class="hljs-comment">[80]</span> Express Legacy Endpoint, MSI 00
        Capabilities: <span class="hljs-comment">[100]</span> Advanced Error Reporting</code></pre></div>
<p>I'm pretty confident that the I/O ports should not say &quot;disabled.&quot; I'm unsure why this is happening.</p>
<p>Specifically:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">        I/O ports at e010 [disabled] [size=8]
        I/O ports at e000 [disabled] [size=8]</pre><pre class="hljs"><code>        <span class="hljs-selector-tag">I</span>/O ports at e010 <span class="hljs-selector-attr">[disabled]</span> <span class="hljs-selector-attr">[size=8]</span>
        <span class="hljs-selector-tag">I</span>/O ports at e000 <span class="hljs-selector-attr">[disabled]</span> <span class="hljs-selector-attr">[size=8]</span></code></pre></div>
<p>And then use that information to run this command:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">sudo modprobe parport_pc io=0xe010</pre><pre class="hljs"><code>sudo modprobe parport_pc <span class="hljs-attribute">io</span>=0xe010</code></pre></div>
<p>There are no complaints, but I don't know which of these is the correct lp port (if any)</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# ls /dev | grep &quot;lp&quot;
lp0
lp1
lp2
lp3
[root@localhost ~]#</pre><pre class="hljs"><code>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># ls /dev | grep <span class="hljs-string">&quot;lp&quot;</span></span>
lp0
lp1
lp2
lp3
[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta">#</span></code></pre></div>
<p>I tried looking at dmesg, but it's unclear what is going on here (this output occurs rigtht after command <code class="inline-code">sudo modprobe parport_pc io=0xe010</code>)</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# dmesg | grep parport
[  279.843630] parport 0xe010 (WARNING): CTR: wrote 0x0c, read 0xff
[  279.843636] parport 0xe010 (WARNING): DATA: wrote 0xaa, read 0xff
[  279.843638] parport 0xe010: You gave this address, but there is probably no parallel port there!
[  279.843652] parport0: PC-style at 0xe010, irq 0 [PCSPP,TRISTATE]
[  279.843659] genirq: Flags mismatch irq 0. 00000000 (parport0) vs. 00015a20 (timer)
[  279.843692]  [&lt;ffffffffc0d7fd90&gt;] ? parport_register_device+0x2d0/0x2d0 [parport]
[  279.843700]  [&lt;ffffffffc0d92d1a&gt;] parport_pc_probe_port+0x61a/0xab0 [parport_pc]
[  279.843704]  [&lt;ffffffffc0d9a0e7&gt;] ? parport_parse_param.constprop.11+0xe7/0xe7 [parport_pc]
[  279.843707]  [&lt;ffffffffc0d9a319&gt;] parport_pc_init+0x232/0xf19 [parport_pc]
[  279.843711]  [&lt;ffffffffc0d9a0e7&gt;] ? parport_parse_param.constprop.11+0xe7/0xe7 [parport_pc]
[  279.843734] parport0: irq 0 in use, resorting to polled operation</pre><pre class="hljs"><code><span class="hljs-comment">[root@localhost ~]</span># dmesg | grep parport
<span class="hljs-comment">[  279.843630]</span> parport 0xe010 (WARNING): CTR: wrote 0x0c, read 0xff
<span class="hljs-comment">[  279.843636]</span> parport 0xe010 (WARNING): DATA: wrote 0xaa, read 0xff
<span class="hljs-comment">[  279.843638]</span> parport 0xe010: You gave this address, but there <span class="hljs-keyword">is</span> probably no parallel port there!
<span class="hljs-comment">[  279.843652]</span> parport0: PC-style at 0xe010, irq 0 <span class="hljs-comment">[PCSPP,TRISTATE]</span>
<span class="hljs-comment">[  279.843659]</span> genirq: Flags mismatch irq 0. 00000000 (parport0) vs. 00015a20 (timer)
<span class="hljs-comment">[  279.843692]</span>  <span class="hljs-comment">[&lt;ffffffffc0d7fd90&gt;]</span> ? parport_register_device+0x2d0/0x2d0 <span class="hljs-comment">[parport]</span>
<span class="hljs-comment">[  279.843700]</span>  <span class="hljs-comment">[&lt;ffffffffc0d92d1a&gt;]</span> parport_pc_probe_port+0x61a/0xab0 <span class="hljs-comment">[parport_pc]</span>
<span class="hljs-comment">[  279.843704]</span>  <span class="hljs-comment">[&lt;ffffffffc0d9a0e7&gt;]</span> ? parport_parse_param.constprop.11+0xe7/0xe7 <span class="hljs-comment">[parport_pc]</span>
<span class="hljs-comment">[  279.843707]</span>  <span class="hljs-comment">[&lt;ffffffffc0d9a319&gt;]</span> parport_pc_init+0x232/0xf19 <span class="hljs-comment">[parport_pc]</span>
<span class="hljs-comment">[  279.843711]</span>  <span class="hljs-comment">[&lt;ffffffffc0d9a0e7&gt;]</span> ? parport_parse_param.constprop.11+0xe7/0xe7 <span class="hljs-comment">[parport_pc]</span>
<span class="hljs-comment">[  279.843734]</span> parport0: irq 0 in use, resorting to polled operation</code></pre></div>
<p>I also tried checking each 'lp' in /dev, but I'm not really sure what output I should see:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# udevadm info -a -p /dev/lp0
syspath not found
[root@localhost ~]# udevadm info -a -p /dev/lp1
syspath not found
[root@localhost ~]# udevadm info -a -p /dev/lp2
syspath not found
[root@localhost ~]# udevadm info -a -p /dev/lp3
syspath not found</pre><pre class="hljs"><code><span class="hljs-selector-attr">[root@localhost ~]</span># udevadm info -<span class="hljs-selector-tag">a</span> -<span class="hljs-selector-tag">p</span> /dev/lp0
syspath not found
<span class="hljs-selector-attr">[root@localhost ~]</span># udevadm info -<span class="hljs-selector-tag">a</span> -<span class="hljs-selector-tag">p</span> /dev/lp1
syspath not found
<span class="hljs-selector-attr">[root@localhost ~]</span># udevadm info -<span class="hljs-selector-tag">a</span> -<span class="hljs-selector-tag">p</span> /dev/lp2
syspath not found
<span class="hljs-selector-attr">[root@localhost ~]</span># udevadm info -<span class="hljs-selector-tag">a</span> -<span class="hljs-selector-tag">p</span> /dev/lp3
syspath not found</code></pre></div>
<p>It seems like I have to somehow get the parallel controller I/O ports and memory to not be disabled.</p>
<hr>
<h2 id="23052024-0315">23/05/2024 03:15</h2>
<p>The readme (<a data-from-md title='../_resources/0145f08e509c4e3fb1e05176436d7b97.txt' href='../_resources/0145f08e509c4e3fb1e05176436d7b97.txt'>readme.txt</a>) mentions</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">Loading the Driver:
-------------------
    
    To load the driver use the following command:
        $ insmod ax99100.ko

    **  '$' --this symbol represent the shell prompt on linux			

Unloading the Driver:
---------------------

    To unload the driver use the following command:
        $rmmod ax99100

    **  '$' --this symbol represent the shell prompt on linux	</pre><pre class="hljs"><code><span class="hljs-section">Loading the Driver:
-------------------</span>
<span class="hljs-code">    </span>
<span class="hljs-code">    To load the driver use the following command:</span>
<span class="hljs-code">        $ insmod ax99100.ko</span>

<span class="hljs-code">    **  &#x27;$&#x27; --this symbol represent the shell prompt on linux			</span>

<span class="hljs-section">Unloading the Driver:
---------------------</span>

<span class="hljs-code">    To unload the driver use the following command:</span>
<span class="hljs-code">        $rmmod ax99100</span>

<span class="hljs-code">    **  &#x27;$&#x27; --this symbol represent the shell prompt on linux	</span></code></pre></div>
<p>which was actually the first thing I did. I tried unloading the driver, rebooting, and repeating the steps in the pdf above, but no luck.</p>
<hr>
<h2 id="23052024-0319">23/05/2024 03:19</h2>
<p>I additionally found these steps in the readme.</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">Steps for setting parallel port :
---------------------------------
        1. rmmod lp
        2. rmmod parport_pc
        2. insmod parport_pc.ko io=bar0 io_hi=bar1 irq=number.

Note: Here, the io, io_hi and irq should be noted from lspci -v.</pre><pre class="hljs"><code><span class="hljs-section">Steps for setting parallel port :
---------------------------------</span>
<span class="hljs-code">        1. rmmod lp</span>
<span class="hljs-code">        2. rmmod parport_pc</span>
<span class="hljs-code">        2. insmod parport_pc.ko io=bar0 io_hi=bar1 irq=number.</span>

Note: Here, the io, io_hi and irq should be noted from lspci -v.</code></pre></div>
<p>So I tried using this information:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">02:00.2 Parallel controller: Asix Electronics Corporation Device 9100 (prog-if 03 [IEEE1284])
        Subsystem: Device a000:2000
        Flags: fast devsel, IRQ 5
        I/O ports at e010 [disabled] [size=8]
        I/O ports at e000 [disabled] [size=8]
        Memory at fbb01000 (32-bit, non-prefetchable) [disabled] [size=4K]
        Memory at fbb00000 (32-bit, non-prefetchable) [disabled] [size=4K]
        Capabilities: [50] MSI: Enable- Count=1/8 Maskable- 64bit+
        Capabilities: [78] Power Management version 3
        Capabilities: [80] Express Legacy Endpoint, MSI 00
        Capabilities: [100] Advanced Error Reporting</pre><pre class="hljs"><code>02:00.2 Parallel controller: Asix Electronics Corporation Device 9100 (prog-if 03 <span class="hljs-comment">[IEEE1284]</span>)
        Subsystem: Device a000:2000
        Flags: fast devsel, IRQ 5
        I/O ports at e010 <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=8]</span>
        I/O ports at e000 <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=8]</span>
        Memory at fbb01000 (32-bit, non-prefetchable) <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=4K]</span>
        Memory at fbb00000 (32-bit, non-prefetchable) <span class="hljs-comment">[disabled]</span> <span class="hljs-comment">[size=4K]</span>
        Capabilities: <span class="hljs-comment">[50]</span> MSI: Enable- Count=1/8 Maskable- 64bit+
        Capabilities: <span class="hljs-comment">[78]</span> Power Management version 3
        Capabilities: <span class="hljs-comment">[80]</span> Express Legacy Endpoint, MSI 00
        Capabilities: <span class="hljs-comment">[100]</span> Advanced Error Reporting</code></pre></div>
<p>I'm not sure what <code class="inline-code">io</code> and <code class="inline-code">io_hi</code> should be. I tried both:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">insmod parport_pc.ko io=0xe010 io_hi=0xe000 irq=5</pre><pre class="hljs"><code>insmod parport_pc.ko <span class="hljs-attribute">io</span>=0xe010 <span class="hljs-attribute">io_hi</span>=0xe000 <span class="hljs-attribute">irq</span>=5</code></pre></div>
<p>which takes <code class="inline-code">io_hi</code> to be the second I/O port BAR, and</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">insmod parport_pc.ko io=0xe010 io_hi=0xe050 irq=5</pre><pre class="hljs"><code>insmod parport_pc.ko <span class="hljs-attribute">io</span>=0xe010 <span class="hljs-attribute">io_hi</span>=0xe050 <span class="hljs-attribute">irq</span>=5</code></pre></div>
<p>which adds 8 bytes (the size) listed above to the <code class="inline-code">io</code> BAR.</p>
<p>All of these (and more dumb ideas I tried) seem to result in:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost AX99100_SP_PP_SPI_Linux_Driver_v1.8.0_Source]# insmod parport_pc.ko io=0xe010 io_hi=0xe000 irq=5
insmod: ERROR: could not insert module parport_pc.ko: Unknown symbol in module</pre><pre class="hljs"><code>[root@localhost AX99100_SP_PP_SPI_Linux_Driver_v1.8.0_Source]# insmod parport_pc.ko <span class="hljs-attribute">io</span>=0xe010 <span class="hljs-attribute">io_hi</span>=0xe000 <span class="hljs-attribute">irq</span>=5
insmod: ERROR: could <span class="hljs-keyword">not</span> insert module parport_pc.ko: Unknown symbol <span class="hljs-keyword">in</span> module</code></pre></div>
<p>At first I thought it was a kernel version issue, but the readme claims no issue:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">Kernels:
--------

    This driver is currently developed and tested on 2.6.13 linux kernel and above </pre><pre class="hljs"><code><span class="hljs-section">Kernels:
--------</span>

<span class="hljs-code">    This driver is currently developed and tested on 2.6.13 linux kernel and above </span></code></pre></div>
<p>as our kernel version is much higher:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost AX99100_SP_PP_SPI_Linux_Driver_v1.8.0_Source]# uname -r
3.10.0-1160.99.1.el7.x86_64</pre><pre class="hljs"><code>[root<span class="hljs-symbol">@localhost</span> AX99100_SP_PP_SPI_Linux_Driver_v1<span class="hljs-number">.8</span><span class="hljs-number">.0</span>_Source]<span class="hljs-meta"># uname -r</span>
<span class="hljs-number">3.10</span><span class="hljs-number">.0</span><span class="hljs-number">-1160.99</span><span class="hljs-number">.1</span>.el7.x86_64</code></pre></div>
<h2 id="24052024-0135">24/05/2024 01:35</h2>
<p>This is the procedureI followed after installing the driver (see above pdf)  to &quot;activate&quot; the card:</p>
<ol>
<li>Enable the PCIe device:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">echo 1 | sudo tee /sys/bus/pci/devices/0000:02:00.2/enable</pre><pre class="hljs"><code><span class="hljs-attribute">echo</span> <span class="hljs-number">1</span> | sudo tee /sys/bus/pci/devices/<span class="hljs-number">0000</span>:<span class="hljs-number">02</span>:<span class="hljs-number">00</span>.<span class="hljs-number">2</span>/enable</code></pre></div>
</li>
<li>Confirm it's enabled, make note of IRQ:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">lspci -v | grep -A 10 &quot;02:00.2&quot;</pre><pre class="hljs"><code><span class="hljs-attribute">lspci</span> -v | grep -A <span class="hljs-number">10</span> <span class="hljs-string">&quot;02:00.2&quot;</span></code></pre></div>
output:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# lspci -v | grep -A 10 &quot;02:00.2&quot;
02:00.2 Parallel controller: Asix Electronics Corporation Device 9100 (prog-if 03 [IEEE1284])
        Subsystem: Device a000:2000
        Flags: fast devsel, IRQ 48
        I/O ports at e010 [size=8]
        I/O ports at e000 [size=8]
        Memory at fbb01000 (32-bit, non-prefetchable) [size=4K]
        Memory at fbb00000 (32-bit, non-prefetchable) [size=4K]
        Capabilities: [50] MSI: Enable- Count=1/8 Maskable- 64bit+
        Capabilities: [78] Power Management version 3
        Capabilities: [80] Express Legacy Endpoint, MSI 00
        Capabilities: [100] Advanced Error Reporting</pre><pre class="hljs"><code>[root@localhost ~]# lspci -v | grep -A 10 <span class="hljs-string">&quot;02:00.2&quot;</span>
02:00.2 Parallel controller: Asix Electronics Corporation Device 9100 (prog-if 03 [IEEE1284])
        Subsystem: Device a000:2000
        Flags: fast devsel,<span class="hljs-built_in"> IRQ </span>48
        I/O ports at e010 [<span class="hljs-attribute">size</span>=8]
        I/O ports at e000 [<span class="hljs-attribute">size</span>=8]
        Memory at fbb01000 (32-bit, non-prefetchable) [<span class="hljs-attribute">size</span>=4K]
        Memory at fbb00000 (32-bit, non-prefetchable) [<span class="hljs-attribute">size</span>=4K]
        Capabilities: [50] MSI: Enable- <span class="hljs-attribute">Count</span>=1/8 Maskable- 64bit+
        Capabilities: [78] Power Management version 3
        Capabilities: [80] Express Legacy Endpoint, MSI 00
        Capabilities: [100] Advanced <span class="hljs-built_in">Error</span> Reporting</code></pre></div>
</li>
<li>Remove old modprobe, load new modprobe:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">sudo modprobe -r parport_pc
sudo modprobe parport_pc io=0xe010 irq=48</pre><pre class="hljs"><code>sudo modprobe -r parport_pc
sudo modprobe parport_pc <span class="hljs-attribute">io</span>=0xe010 <span class="hljs-attribute">irq</span>=48</code></pre></div>
</li>
<li>Make sure <code class="inline-code">dmesg</code> shows no issues:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# dmesg | grep parport
[  276.465148] parport0: PC-style at 0xe010, irq 48 [PCSPP,TRISTATE,EPP]
[root@localhost ~]#</pre><pre class="hljs"><code>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># dmesg | grep parport</span>
[  <span class="hljs-number">276.465148</span>] parport0: PC-style at <span class="hljs-number">0xe010</span>, irq <span class="hljs-number">48</span> [PCSPP,TRISTATE,EPP]
[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta">#</span></code></pre></div>
</li>
<li>Check for <code class="inline-code">parport0</code> in devices:<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# ls /dev/parport0
/dev/parport0</pre><pre class="hljs"><code>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># ls /dev/parport0</span>
<span class="hljs-regexp">/dev/parport</span>0</code></pre></div>
</li>
<li>Get details abourt parport0<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost ~]# udevadm info -q path -n /dev/parport0
/devices/platform/parport_pc.57360/ppdev/parport0
[root@localhost ~]# udevadm info -a -p /devices/platform/parport_pc.57360/ppdev/parport0

Udevadm info starts with the device specified by the devpath and then
walks up the chain of parent devices. It prints for every device
found, all possible attributes in the udev rules key format.
A rule to match, can be composed by the attributes of the device
and the attributes from one single parent device.

  looking at device '/devices/platform/parport_pc.57360/ppdev/parport0':
    KERNEL==&quot;parport0&quot;
    SUBSYSTEM==&quot;ppdev&quot;
    DRIVER==&quot;&quot;

  looking at parent device '/devices/platform/parport_pc.57360':
    KERNELS==&quot;parport_pc.57360&quot;
    SUBSYSTEMS==&quot;platform&quot;
    DRIVERS==&quot;parport_pc&quot;

  looking at parent device '/devices/platform':
    KERNELS==&quot;platform&quot;
    SUBSYSTEMS==&quot;&quot;
    DRIVERS==&quot;&quot;

[root@localhost ~]#</pre><pre class="hljs"><code>[root@localhost ~]# udevadm <span class="hljs-built_in">info</span> -q path -n /dev/parport0
/devices/platform/parport_pc.57360/ppdev/parport0
[root@localhost ~]# udevadm <span class="hljs-built_in">info</span> -a -p /devices/platform/parport_pc.57360/ppdev/parport0

Udevadm <span class="hljs-built_in">info</span> starts with the device specified by the devpath <span class="hljs-keyword">and</span> then
walks up the chain of parent devices. It prints <span class="hljs-keyword">for</span> every device
found, all possible attributes <span class="hljs-keyword">in</span> the udev rules key format.
A rule <span class="hljs-keyword">to</span> match, can be composed by the attributes of the device
<span class="hljs-keyword">and</span> the attributes <span class="hljs-keyword">from</span> one single parent device.

  looking at device <span class="hljs-string">&#x27;/devices/platform/parport_pc.57360/ppdev/parport0&#x27;</span>:
    <span class="hljs-attribute">KERNEL</span>==&quot;parport0&quot;
    <span class="hljs-attribute">SUBSYSTEM</span>==&quot;ppdev&quot;
    <span class="hljs-attribute">DRIVER</span>==&quot;&quot;

  looking at parent device <span class="hljs-string">&#x27;/devices/platform/parport_pc.57360&#x27;</span>:
    <span class="hljs-attribute">KERNELS</span>==&quot;parport_pc.57360&quot;
    <span class="hljs-attribute">SUBSYSTEMS</span>==&quot;platform&quot;
    <span class="hljs-attribute">DRIVERS</span>==&quot;parport_pc&quot;

  looking at parent device <span class="hljs-string">&#x27;/devices/platform&#x27;</span>:
    <span class="hljs-attribute">KERNELS</span>==&quot;platform&quot;
    <span class="hljs-attribute">SUBSYSTEMS</span>==&quot;&quot;
    <span class="hljs-attribute">DRIVERS</span>==&quot;&quot;

[root@localhost ~]#</code></pre></div>
</li>
</ol>
<hr>
<h2 id="24052024-0156">24/05/2024 01:56</h2>
<p>Apparently doing above was not enough. I tried changinging the code for MasterGM2/frontend.cpp</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">  /* configure parallel port */
  if (trigger_source == PP) {
    /* open trigger device */
    const char *fd_name = &quot;/dev/trigger&quot;;
    printf(&quot;Connecting to [%s] ...&quot;, fd_name);

    fd_pp = open(&quot;/dev/trigger&quot;, O_RDWR); // for DAQ enable output
    if (fd_pp &lt; 0) {
      cm_msg(MERROR, &quot;frontend_init&quot;, &quot;Error opening file [%s]&quot;, fd_name);
      return FE_ERR_HW;
    }
    printf(&quot; done PP configure \n&quot;);

  }</pre><pre class="hljs"><code>  <span class="hljs-comment">/* configure parallel port */</span>
  <span class="hljs-keyword">if</span> (trigger_source == PP) {
    <span class="hljs-comment">/* open trigger device */</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *fd_name = <span class="hljs-string">&quot;/dev/trigger&quot;</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Connecting to [%s] ...&quot;</span>, fd_name);

    fd_pp = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;/dev/trigger&quot;</span>, O_RDWR); <span class="hljs-comment">// for DAQ enable output</span>
    <span class="hljs-keyword">if</span> (fd_pp &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">cm_msg</span>(MERROR, <span class="hljs-string">&quot;frontend_init&quot;</span>, <span class="hljs-string">&quot;Error opening file [%s]&quot;</span>, fd_name);
      <span class="hljs-keyword">return</span> FE_ERR_HW;
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; done PP configure \n&quot;</span>);

  }</code></pre></div>
<p>to</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">  /* configure parallel port */
  if (trigger_source == PP) {
    /* open trigger device */
    const char *fd_name = &quot;/dev/parport0&quot;;
    printf(&quot;Connecting to [%s] ...&quot;, fd_name);

    fd_pp = open(&quot;/dev/parport0&quot;, O_RDWR); // for DAQ enable output
    if (fd_pp &lt; 0) {
      cm_msg(MERROR, &quot;frontend_init&quot;, &quot;Error opening file [%s]&quot;, fd_name);
      return FE_ERR_HW;
    }
    printf(&quot; done PP configure \n&quot;);

  }</pre><pre class="hljs"><code>  <span class="hljs-comment">/* configure parallel port */</span>
  <span class="hljs-keyword">if</span> (trigger_source == PP) {
    <span class="hljs-comment">/* open trigger device */</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *fd_name = <span class="hljs-string">&quot;/dev/parport0&quot;</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Connecting to [%s] ...&quot;</span>, fd_name);

    fd_pp = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;/dev/parport0&quot;</span>, O_RDWR); <span class="hljs-comment">// for DAQ enable output</span>
    <span class="hljs-keyword">if</span> (fd_pp &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">cm_msg</span>(MERROR, <span class="hljs-string">&quot;frontend_init&quot;</span>, <span class="hljs-string">&quot;Error opening file [%s]&quot;</span>, fd_name);
      <span class="hljs-keyword">return</span> FE_ERR_HW;
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; done PP configure \n&quot;</span>);

  }</code></pre></div>
<p>It didn't complain when initializing (but I'm pretty sure it wouldn't complain as long as you gave it a valid filepath at this point).</p>
<p>I was able to start a run but saw no events from the master (and no errors). Ending a run gave this error:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">01:55:35.682 2024/05/24 [mhttpd,INFO] Run #230 stopped

01:55:32.464 2024/05/24 [MasterGM2,ERROR] [frontend.cpp:1312:end_of_run,ERROR] Error writing to parallel port

01:55:32.464 2024/05/24 [MasterGM2,INFO] End of Run: fills registered by all frontends match!

01:55:32.464 2024/05/24 [MasterGM2,INFO] End of Run: DC7 Triggers Received 16081  Count triggers 0

01:55:01.711 2024/05/24 [mhttpd,INFO] Run #230 started</pre><pre class="hljs"><code>01:55:35.682 2024/05/24 [mhttpd,<span class="hljs-built_in">INFO</span>] <span class="hljs-built_in">Run</span> #230 stopped

01:55:32.464 2024/05/24 [MasterGM2,<span class="hljs-built_in">ERROR</span>] [frontend.cpp:1312:end_of_run,<span class="hljs-built_in">ERROR</span>] <span class="hljs-built_in">Error</span> writing <span class="hljs-keyword">to</span> parallel<span class="hljs-built_in"> port
</span>
01:55:32.464 2024/05/24 [MasterGM2,<span class="hljs-built_in">INFO</span>] End of Run: fills registered by all frontends match!

01:55:32.464 2024/05/24 [MasterGM2,<span class="hljs-built_in">INFO</span>] End of Run: DC7 Triggers Received 16081  Count triggers 0

01:55:01.711 2024/05/24 [mhttpd,<span class="hljs-built_in">INFO</span>] <span class="hljs-built_in">Run</span> #230 started</code></pre></div>
<p>It seems apparent that <code class="inline-code">poll( &amp;pfds, 1, timeout)</code> in this part of the code:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">    if(trigger_source==PP){

      pfds.fd = fd_pp;
      pfds.events = POLLIN;

      int timeout = 10; 

      int ret = 0;
      ret = poll( &amp;pfds, 1, timeout);

      if ( ret &gt; 0 )
      {	    </pre><pre class="hljs"><code>    if(trigger_source==PP){

      pfds<span class="hljs-number">.</span>fd = fd_pp<span class="hljs-comment">;</span>
      pfds<span class="hljs-number">.</span>events = POLLIN<span class="hljs-comment">;</span>

      <span class="hljs-keyword">int</span> timeout = <span class="hljs-number">10</span><span class="hljs-comment">; </span>

      <span class="hljs-keyword">int</span> <span class="hljs-keyword">ret</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
      <span class="hljs-keyword">ret</span> = poll( &amp;pfds, <span class="hljs-number">1</span>, timeout)<span class="hljs-comment">;</span>

      if ( <span class="hljs-keyword">ret</span> &gt; <span class="hljs-number">0</span> )
      {	    </code></pre></div>
<p>is returning less than 1 every time. I.e. the polling is probably timing out.</p>
<hr>
<h2 id="24052024-0215">24/05/2024 02:15</h2>
<p>To test out the paralllel port, I got chatGPT to write some C code (placed in /home/playground/parallel_port/parallel_port_test) that supposedly reads and writes to it:<br>
<strong>parallel_port_test.c</strong></p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">#include &lt;stdio.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;linux/ppdev.h&gt;

int main() {
    int fd = open(&quot;/dev/parport0&quot;, O_RDWR);
    if (fd == -1) {
        perror(&quot;Cannot open /dev/parport0&quot;);
        return 1;
    }

    if (ioctl(fd, PPEXCL) &lt; 0) {
        perror(&quot;Could not lock port&quot;);
        close(fd);
        return 1;
    }

    if (ioctl(fd, PPCLAIM) &lt; 0) {
        perror(&quot;Could not claim port&quot;);
        close(fd);
        return 1;
    }

    char write_data = 0xFF; // Data to send
    printf(&quot;Writing data: 0x%02X\n&quot;, (unsigned char)write_data);
    if (ioctl(fd, PPWDATA, &amp;write_data) &lt; 0) {
        perror(&quot;Could not write data&quot;);
        close(fd);
        return 1;
    } else {
        printf(&quot;Data written successfully\n&quot;);
    }

    char read_data;
    if (ioctl(fd, PPRSTATUS, &amp;read_data) &lt; 0) {
        perror(&quot;Could not read data&quot;);
        close(fd);
        return 1;
    }

    printf(&quot;Data read: 0x%02X\n&quot;, read_data);

    if (read_data == write_data) {
        printf(&quot;Readback matches write operation.\n&quot;);
    } else {
        printf(&quot;Readback does not match write operation.\n&quot;);
    }

    ioctl(fd, PPRELEASE);
    close(fd);
    return 0;
}</pre><pre class="hljs"><code>#include &lt;stdio.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;linux/ppdev.h&gt;

int main() {
    int fd = open(&quot;/dev/parport0&quot;, O_RDWR);
    if (fd == -1) {
        perror(&quot;Cannot open /dev/parport0&quot;);
        return 1;
    }

    if (ioctl(fd, PPEXCL) &lt; 0) {
        perror(&quot;Could not lock port&quot;);
        close(fd);
        return 1;
    }

    if (ioctl(fd, PPCLAIM) &lt; 0) {
        perror(&quot;Could not claim port&quot;);
        close(fd);
        return 1;
    }

    char write_data = 0xFF; // Data to send
    printf(&quot;Writing data: 0x%02X\n&quot;, (unsigned char)write_data);
    if (ioctl(fd, PPWDATA, &amp;write_data) &lt; 0) {
        perror(&quot;Could not write data&quot;);
        close(fd);
        return 1;
    } else {
        printf(&quot;Data written successfully\n&quot;);
    }

    char read_data;
    if (ioctl(fd, PPRSTATUS, &amp;read_data) &lt; 0) {
        perror(&quot;Could not read data&quot;);
        close(fd);
        return 1;
    }

    printf(&quot;Data read: 0x%02X\n&quot;, read_data);

    if (read_data == write_data) {
        printf(&quot;Readback matches write operation.\n&quot;);
    } else {
        printf(&quot;Readback does not match write operation.\n&quot;);
    }

    ioctl(fd, PPRELEASE);
    close(fd);
    return 0;
}</code></pre></div>
<p>Nothing fails, however, the output indicates that the write wasn't succesfful:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost parallel_port_test]# ./parallel_port_test
Writing data: 0xFF
Data written successfully
Data read: 0x38
Readback does not match write operation.</pre><pre class="hljs"><code>[<span class="hljs-type">root</span>@<span class="hljs-type">localhost</span> <span class="hljs-type">parallel_port_test</span>]<span class="hljs-comment"># ./parallel_port_test</span>
Writing <span class="hljs-keyword">data</span>: <span class="hljs-number">0</span>xFF
<span class="hljs-keyword">Data</span> written successfully
<span class="hljs-keyword">Data</span> read: <span class="hljs-number">0</span>x38
Readback does not match <span class="hljs-built_in">write</span> operation.</code></pre></div>
<hr>
<h2 id="24052024-0234">24/05/2024 02:34</h2>
<p>I got ChatGPT to make me two other test scripts, both failed similarly:<br>
<strong>parallel_port_write.c</strong></p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;linux/ppdev.h&gt;
#include &lt;limits.h&gt; // Include limits.h for UCHAR_MAX

#define PORT_ADDRESS &quot;/dev/parport0&quot;
#define DEFAULT_DATA 0xFF

int main(int argc, char *argv[]) {
    // Data to write to the parallel port (default: 0xFF)
    unsigned char write_data = DEFAULT_DATA;

    // Check if a command-line argument is provided
    if (argc &gt; 1) {
        // Convert the argument to an integer
        unsigned long int parsed_data = strtoul(argv[1], NULL, 0);
        
        // Check if conversion was successful
        if (parsed_data &lt;= UCHAR_MAX) {
            write_data = (unsigned char)parsed_data;
        } else {
            fprintf(stderr, &quot;Error: Invalid data argument. Using default: 0x%02X\n&quot;, DEFAULT_DATA);
        }
    }

    // Open the parallel port
    int fd_pp = open(PORT_ADDRESS, O_RDWR);
    if (fd_pp == -1) {
        perror(&quot;Error opening parallel port&quot;);
        return 1;
    }

    // Write data to the parallel port
    printf(&quot;Writing data to parallel port: 0x%02X\n&quot;, write_data);
    ssize_t bytes_written = write(fd_pp, &amp;write_data, sizeof(write_data));
    if (bytes_written &lt; 0) {
        perror(&quot;Error writing data to parallel port&quot;);
        close(fd_pp);
        return 1;
    } else if (bytes_written != sizeof(write_data)) {
        fprintf(stderr, &quot;Error: Incomplete write to parallel port\n&quot;);
        close(fd_pp);
        return 1;
    }

    printf(&quot;Data written successfully\n&quot;);

    // Close the parallel port
    close(fd_pp);
    return 0;
}
</pre><pre class="hljs"><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;linux/ppdev.h&gt;
#include &lt;limits.h&gt; // Include limits.h for UCHAR_MAX

#define PORT_ADDRESS &quot;/dev/parport0&quot;
#define DEFAULT_DATA 0xFF

int main(int argc, char *argv[]) {
    // Data to write to the parallel port (default: 0xFF)
    unsigned char write_data = DEFAULT_DATA;

    // Check if a command-line argument is provided
    if (argc &gt; 1) {
        // Convert the argument to an integer
        unsigned long int parsed_data = strtoul(argv[1], NULL, 0);
        
        // Check if conversion was successful
        if (parsed_data &lt;= UCHAR_MAX) {
            write_data = (unsigned char)parsed_data;
        } else {
            fprintf(stderr, &quot;Error: Invalid data argument. Using default: 0x%02X\n&quot;, DEFAULT_DATA);
        }
    }

    // Open the parallel port
    int fd_pp = open(PORT_ADDRESS, O_RDWR);
    if (fd_pp == -1) {
        perror(&quot;Error opening parallel port&quot;);
        return 1;
    }

    // Write data to the parallel port
    printf(&quot;Writing data to parallel port: 0x%02X\n&quot;, write_data);
    ssize_t bytes_written = write(fd_pp, &amp;write_data, sizeof(write_data));
    if (bytes_written &lt; 0) {
        perror(&quot;Error writing data to parallel port&quot;);
        close(fd_pp);
        return 1;
    } else if (bytes_written != sizeof(write_data)) {
        fprintf(stderr, &quot;Error: Incomplete write to parallel port\n&quot;);
        close(fd_pp);
        return 1;
    }

    printf(&quot;Data written successfully\n&quot;);

    // Close the parallel port
    close(fd_pp);
    return 0;
}
</code></pre></div>
<p><strong>parallel_port_poll.c</strong></p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;sys/poll.h&gt; // Include poll header

#define PORT_ADDRESS &quot;/dev/parport0&quot; // Adjust the port address as per your system

int main() {
    // Open the parallel port
    int fd_pp = open(PORT_ADDRESS, O_RDONLY); // Open in read-only mode for polling
    if (fd_pp == -1) {
        perror(&quot;Cannot open parallel port&quot;);
        return 1;
    }

    // Set up the pollfd structure
    struct pollfd pfds;
    pfds.fd = fd_pp; // File descriptor to poll
    pfds.events = POLLIN; // Events to monitor (in this case, POLLIN for input data)

    int timeout = 10; // Timeout value in milliseconds

    // Perform polling
    int ret = poll(&amp;pfds, 1, timeout);
    if (ret == -1) {
        perror(&quot;poll&quot;);
        close(fd_pp);
        return 1;
    } else if (ret == 0) {
        printf(&quot;Timeout occurred\n&quot;);
    } else {
        // Check if POLLIN event occurred
        if (pfds.revents &amp; POLLIN) {
            printf(&quot;Data available for reading from parallel port\n&quot;);
            // Read data from the parallel port if needed
            unsigned char data;
            if (read(fd_pp, &amp;data, sizeof(data)) &lt; 0) {
                perror(&quot;Error reading data from parallel port&quot;);
            } else {
                printf(&quot;Data read from parallel port: 0x%02X\n&quot;, data);
            }
        } else {
            printf(&quot;Unexpected event occurred\n&quot;);
        }
    }

    // Close the parallel port
    close(fd_pp);
    return 0;
}</pre><pre class="hljs"><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/ioctl.h&gt;
#include &lt;sys/poll.h&gt; // Include poll header

#define PORT_ADDRESS &quot;/dev/parport0&quot; // Adjust the port address as per your system

int main() {
    // Open the parallel port
    int fd_pp = open(PORT_ADDRESS, O_RDONLY); // Open in read-only mode for polling
    if (fd_pp == -1) {
        perror(&quot;Cannot open parallel port&quot;);
        return 1;
    }

    // Set up the pollfd structure
    struct pollfd pfds;
    pfds.fd = fd_pp; // File descriptor to poll
    pfds.events = POLLIN; // Events to monitor (in this case, POLLIN for input data)

    int timeout = 10; // Timeout value in milliseconds

    // Perform polling
    int ret = poll(&amp;pfds, 1, timeout);
    if (ret == -1) {
        perror(&quot;poll&quot;);
        close(fd_pp);
        return 1;
    } else if (ret == 0) {
        printf(&quot;Timeout occurred\n&quot;);
    } else {
        // Check if POLLIN event occurred
        if (pfds.revents &amp; POLLIN) {
            printf(&quot;Data available for reading from parallel port\n&quot;);
            // Read data from the parallel port if needed
            unsigned char data;
            if (read(fd_pp, &amp;data, sizeof(data)) &lt; 0) {
                perror(&quot;Error reading data from parallel port&quot;);
            } else {
                printf(&quot;Data read from parallel port: 0x%02X\n&quot;, data);
            }
        } else {
            printf(&quot;Unexpected event occurred\n&quot;);
        }
    }

    // Close the parallel port
    close(fd_pp);
    return 0;
}</code></pre></div>
<p>With outputs:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">[root@localhost parallel_port_test]# ./parallel_port_write 0xAA
Writing data to parallel port: 0xAA
Error writing data to parallel port: Invalid argument
[root@localhost parallel_port_test]# ./parallel_port_poll
Timeout occurred
[root@localhost parallel_port_test]#</pre><pre class="hljs"><code>[root@localhost parallel_port_test]# ./parallel_port_write 0xAA
Writing data to parallel port: 0xAA
<span class="hljs-keyword">Error </span>writing data to parallel port: Invalid argument
[root@localhost parallel_port_test]# ./parallel_port_poll
Timeout occurred
[root@localhost parallel_port_test]#</code></pre></div>
<p>These two files try to more closely mimic the function calls present in MasterGM2/frontend.cpp</p>
<hr>
<h2 id="24052024-0240">24/05/2024 02:40</h2>
<p>I'm fairly confident <code class="inline-code">/dev/parport0</code> is the correct path because it dissapears with command:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">sudo modprobe -r parport_pc</pre><pre class="hljs"><code><span class="hljs-attribute">sudo modprobe -r parport_pc</span></code></pre></div>
<p>and reappears with command:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">sudo modprobe parport_pc io=0xe010 irq=48</pre><pre class="hljs"><code>sudo modprobe parport_pc <span class="hljs-attribute">io</span>=0xe010 <span class="hljs-attribute">irq</span>=48</code></pre></div>
<p>Interestingly, I don't need to include <code class="inline-code">irq=48</code> to make <code class="inline-code">/dev/parport0</code> appear. I'm not sure if this is meaningful.</p>
<p>In any event, the result of the scripts and launching the frontends is no different whether I use</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">sudo modprobe parport_pc io=0xe010 irq=48</pre><pre class="hljs"><code>sudo modprobe parport_pc <span class="hljs-attribute">io</span>=0xe010 <span class="hljs-attribute">irq</span>=48</code></pre></div>
<p>or</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">sudo modprobe parport_pc io=0xe010</pre><pre class="hljs"><code>sudo modprobe parport_pc <span class="hljs-attribute">io</span>=0xe010</code></pre></div>
<p>to load the module.</p>
<p>But I do notice MasterGM2/frontend causes this output when loading the module in the second case:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">Message from syslogd@localhost at May 24 02:50:47 ...
 kernel:Disabling IRQ #18</pre><pre class="hljs"><code><span class="hljs-attribute">Message</span> from syslogd@localhost at May <span class="hljs-number">24</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">47</span> ...
 <span class="hljs-attribute">kernel</span>:Disabling IRQ #<span class="hljs-number">18</span></code></pre></div>
<p>it occurs system wide, I saw it occur in another shell session ssh'd into the computer that was not running the frontend.<br>
I also notice this error at the beginning of a run:</p>
<div class="joplin-editable"><pre class="joplin-source" data-joplin-language="" data-joplin-source-open="```&#10;" data-joplin-source-close="&#10;```">Error: Write to parallel port failed! Data 0x007f
[MasterGM2,ERROR] [frontend.cpp:1112:begin_of_runfe_loop,ERROR] Error writing to parallel port
begin_of_run: write datum  0x7f</pre><pre class="hljs"><code>Error: Write <span class="hljs-keyword">to</span> parallel<span class="hljs-built_in"> port </span>failed! Data 0x007f
[MasterGM2,<span class="hljs-built_in">ERROR</span>] [frontend.cpp:1112:begin_of_runfe_loop,<span class="hljs-built_in">ERROR</span>] <span class="hljs-built_in">Error</span> writing <span class="hljs-keyword">to</span> parallel<span class="hljs-built_in"> port
</span>begin_of_run: write datum  0x7f</code></pre></div>
<p>That is not critical to the run starting. It happens whether I do <code class="inline-code">sudo modprobe parport_pc io=0xe010 irq=48</code> or <code class="inline-code">sudo modprobe parport_pc io=0xe010</code></p>
<hr>
</div></div>
					</body>
				</html>
			